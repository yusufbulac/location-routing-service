# Location Routing Service

A backend service built with Golang and Gin framework for managing and routing geographic locations.

## Features

- Add new locations with name, coordinates and custom marker color
- List all saved locations
- View detailed information for a specific location
- Edit existing location data
- Generate a simple point-to-point route based on geographical proximity (bird's-eye view)
- Input validation using go-playground/validator
- Rate limiting (per IP)
- Swagger/OpenAPI documentation (```/swagger/index.html```)
- Unit tests for service layer (testify + mock repository)
- Support graceful server shutdown with timeout and signal handling
- Dockerized application with MySQL
- Layered architecture (handler, service, repository)
- Structured logging with Zap
- Pagination for GET /locations
- Hex color format validation for location markers
- Makefile for common tasks
- Docker healthcheck support
- Optional: Test coverage, CI/CD pipeline, and deployment support

## Requirements

- Go 1.22+
- Docker & Docker Compose
- MySQL (via Docker Compose)

## Tech Stack

- [Go (Golang)](https://golang.org/)
- [Gin Web Framework](https://github.com/gin-gonic/gin)
- [GORM ORM](https://gorm.io/)
- [MySQL](https://www.mysql.com/)
- [Docker](https://www.docker.com/)
- [Validator.v10](https://github.com/go-playground/validator)
- [Swag CLI](https://github.com/swaggo/swag)
- [Testify](https://github.com/stretchr/testify)
- [Zap Logger](https://github.com/uber-go/zap)
- [Mockery](https://github.com/vektra/mockery)
- [gin-contrib/limiter](https://github.com/gin-contrib/limiter)

## Project Structure

```
├── cmd/                    # Main entrypoint (main.go)
├── internal/              # Application logic (modularized)
│   ├── config/            # Configuration and database connection
│   ├── dto/               # Request and response structures
│   ├── handler/           # HTTP layer / API handlers
│   ├── model/             # GORM models
│   ├── repository/        # DB access logic
│   ├── service/           # Business logic
│   └── middleware/        # Custom middleware (rate limiting, etc.)
│   └── validation/        # Custom validators and error format
├── docs/                  # Auto-generated Swagger files
├── Dockerfile             # Container build definition
├── docker-compose.yml     # Multi-container orchestration
├── Makefile               # CLI tasks (test, run, lint, etc.)
├── .env.example           # Environment config template
└── go.mod / go.sum        # Dependencies
```

## Run Locally

```bash
# Clone the repo
git clone https://github.com/yusufbulac/location-routing-service.git
cd location-routing-service

# Create .env from example
cp .env.example .env

# Build and run with Docker
docker-compose up --build
```

Then visit:

[http://localhost:8080/swagger/index.html](http://localhost:8080/swagger/index.html) → Swagger UI

## Unit testing

Unit tests written using `testify` and mocks generated by `mockery`:

```bash
go test ./internal/service/...
```

## Integration Testing

Use the provided test runner script:

```bash
./test/test.sh
```

It will:
- Load .env.test
- Wait for MySQL to be ready
- Run tests in ./test/integration

Ensure `.env.test` has valid MySQL test credentials and that the database is up.

## What’s tested?
- Creating a new location
- Listing locations (with pagination)
- Getting a location by ID
- Updating a location
- Validation error handling
- 404 and bad request scenarios

## Logging
Structured logging is handled via zap. Logs will output HTTP requests, errors, and internal events.

## Notes

- All environment variables should be configured in `.env`.
- Swagger documentation is auto-generated using Swag CLI (`swag init -g cmd/main.go`).
- API versioning under `/api/v1`.
- Graceful shutdown uses `os/signal` + `context.WithTimeout()`.
- Makefile contains shortcuts for build, lint, and test.

---

Developed as a technical case project for Golang Developer position.